(function(t){function e(e){for(var s,o,r=e[0],l=e[1],c=e[2],d=0,u=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);h&&h(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,o=1;o<i.length;o++){var r=i[o];0!==a[r]&&(s=!1)}s&&(n.splice(e--,1),t=l(l.s=i[0]))}return t}var s={},o={app:0},a={app:0},n=[];function r(t){return l.p+"js/"+({}[t]||t)+"."+{"chunk-15eaa1ff":"8387f49f","chunk-1697451e":"97ef9d1d","chunk-17fbb76d":"b04895d4","chunk-1b176ac4":"b00801e6","chunk-2d2250de":"d94474fc","chunk-343b4524":"dd2bc445","chunk-3b69a2f4":"eebb3ea9","chunk-3e919318":"0dd4d77a","chunk-436a80bf":"f4986347","chunk-5b477aca":"b6c8a610","chunk-63f9ef91":"f4a3fe03","chunk-7d764362":"4290d1e7","chunk-ae56bae2":"b7ef0980","chunk-7c5d0f8a":"35b7ba1d","chunk-a5c4b196":"4e4135c4","chunk-dda333e6":"edd4d837"}[t]+".js"}function l(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(t){var e=[],i={"chunk-15eaa1ff":1,"chunk-1697451e":1,"chunk-17fbb76d":1,"chunk-1b176ac4":1,"chunk-343b4524":1,"chunk-3b69a2f4":1,"chunk-3e919318":1,"chunk-436a80bf":1,"chunk-5b477aca":1,"chunk-63f9ef91":1,"chunk-7d764362":1,"chunk-ae56bae2":1,"chunk-7c5d0f8a":1,"chunk-a5c4b196":1,"chunk-dda333e6":1};o[t]?e.push(o[t]):0!==o[t]&&i[t]&&e.push(o[t]=new Promise((function(e,i){for(var s="css/"+({}[t]||t)+"."+{"chunk-15eaa1ff":"67922d71","chunk-1697451e":"fde44895","chunk-17fbb76d":"ded1e910","chunk-1b176ac4":"6006950b","chunk-2d2250de":"31d6cfe0","chunk-343b4524":"170e2108","chunk-3b69a2f4":"bb49019c","chunk-3e919318":"7fa20778","chunk-436a80bf":"35a72e3a","chunk-5b477aca":"13f4afd4","chunk-63f9ef91":"8d64a14a","chunk-7d764362":"901ed90d","chunk-ae56bae2":"42c368fb","chunk-7c5d0f8a":"cac5a498","chunk-a5c4b196":"264d1038","chunk-dda333e6":"1a472609"}[t]+".css",a=l.p+s,n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var c=n[r],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===s||d===a))return e()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){c=u[r],d=c.getAttribute("data-href");if(d===s||d===a)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var s=e&&e.target&&e.target.src||a,n=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=s,delete o[t],h.parentNode.removeChild(h),i(n)},h.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){o[t]=0})));var s=a[t];if(0!==s)if(s)e.push(s[2]);else{var n=new Promise((function(e,i){s=a[t]=[e,i]}));e.push(s[2]=n);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=r(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(h);var i=a[t];if(0!==i){if(i){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",u.name="ChunkLoadError",u.type=s,u.request=o,i[1](u)}a[t]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=s,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(i,s,function(e){return t[e]}.bind(null,s));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/web/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=d;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0a27":function(t,e,i){},"18fd":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"songs-list-main"},[e("div",{staticClass:"list-header flex"},[e("div",{staticClass:"columnIndex"},[t._v("序号")]),e("div",{staticClass:"columnSong"},[t._v("歌曲")]),e("div",{staticClass:"columnSinger"},[t._v("歌手")]),"mini"!==t.typeSize?e("div",{staticClass:"columnAlbum"},[t._v("专辑")]):t._e(),e("div",{staticClass:"columnTime"},[t._v("时长")])]),e("div",{ref:"curSongRef",staticClass:"list-scroll",style:{height:t.height+"px"}},[e("div",{staticClass:"list-main",style:t.curSongSty},t._l(t.list,(function(i,s){return e("div",{key:i.id,class:t.isCurSong(i,s)},[e("div",{staticClass:"columnIndex"},[e("span",{staticClass:"songlist-index"},[t._v(t._s(t.indexMethod(s)))]),t._m(0,!0),e("i",{class:t.playIcon(i),on:{click:function(e){return t.currentSong(i)}}})]),e("div",{staticClass:"columnSong songlist-name"},[e("router-link",{class:t.typeSize,attrs:{to:{path:"/song",query:{id:i.id}}}},[t._v(" "+t._s(i.name)+" ")]),"mini"!==t.typeSize?[i.mvId?e("router-link",{staticClass:"mv-name",attrs:{to:{path:"/mv",query:{id:i.mvId}}}},[e("i",{staticClass:"iconfont icon-video"})]):t._e(),i.vip?e("i",{staticClass:"iconfont icon-vip"}):t._e()]:t._e()],2),e("div",{staticClass:"columnSinger songlist-singer"},t._l(i.singer,(function(i,s){return e("router-link",{key:i.name,staticClass:"song_name",attrs:{to:{path:"/singer",query:{id:i.id}}}},[t._v(t._s(0!==s?" / "+i.name:i.name))])})),1),"mini"!==t.typeSize?e("div",{staticClass:"columnAlbum"},[i.album?e("router-link",{staticClass:"songlist-album",attrs:{to:{path:"/album",query:{id:i.album.id}}}},[t._v(t._s(i.album.name))]):t._e()],1):t._e(),e("div",{staticClass:"columnTime"},[e("div",{staticClass:"songlist-time"},[t._v(" "+t._s(i.duration)+" ")]),e("div",{staticClass:"songlist-oper"},[e("i",{staticClass:"iconfont icon-arrow",attrs:{title:"下载歌曲"},on:{click:function(e){return t.downloadSong(i)}}}),"mini"!==t.typeSize?e("i",{staticClass:"iconfont icon-add",attrs:{title:"添加到列表"},on:{click:function(e){return t.addSongList(i)}}}):t._e(),e("el-popover",{ref:"popAddList",refInFor:!0,attrs:{placement:"bottom",trigger:"click"}},[e("i",{staticClass:"iconfont icon-add-list",attrs:{slot:"reference",title:"添加到歌单"},on:{click:t.closeAddListPop},slot:"reference"})]),e("i",{staticClass:"iconfont icon-collect",on:{click:function(e){return t.likeSong(i)}}}),"mini"===t.typeSize?e("i",{staticClass:"iconfont icon-del",attrs:{title:"删除"},on:{click:function(e){return e.stopPropagation(),t.delList(s)}}}):t._e()],1)])])})),0)]),t.isShowPagination?e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","page-size":this.pageSize,"current-page":t.currentPage,layout:"prev, pager, next",total:this.songList.length},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1):t._e()])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"audio-icon"},[e("div",{staticClass:"column",staticStyle:{"animation-delay":"-1.2s"}}),e("div",{staticClass:"column"}),e("div",{staticClass:"column",staticStyle:{"animation-delay":"-1.5s"}}),e("div",{staticClass:"column",staticStyle:{"animation-delay":"-0.9s"}}),e("div",{staticClass:"column",staticStyle:{"animation-delay":"-0.6s"}})])}],a=i("7736"),n=i("47df"),r={name:"songList",components:{},props:{songList:{type:Array,required:!0},typeSize:{type:String,default:"normal"},stripe:{type:Boolean,default:!1},offset:{type:Number,default:0},height:{type:[Number,String],default:"auto"},isScroll:{type:Boolean,default:!1},isShowTips:{type:Boolean,default:!0}},data(){return{pageSize:30,currentPage:1,playing:!1,timer:null,curScroll:-1}},computed:{...Object(a["c"])(["playList","playIndex","isPlayed"]),list(){return this.isScroll?this.songList:this.songList.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)},isCurSong(){const t=this;return(e,i)=>["list-item",t.stripe&&i%2===0?"stripe":"",t.isPlayed&&t.curSongInfo&&e.id===t.curSongInfo.id?"active":"",e.license?"disable":"",e.vip?"vip":""]},isShowPagination(){return this.songList.length>this.pageSize&&!this.isScroll},playIcon(){const t=this;return e=>["iconfont","playicon",this.isPlayed&&t.curSongInfo&&e.id===t.curSongInfo.id?"icon-pause":"icon-play"]},curSongSty(){return`transform: translateY(${this.curScroll}px)`},curSongInfo(){return this.playList[this.playIndex]}},mounted(){const t=this;this.scrollCurSong(this.curSongInfo),t.$refs.curSongRef.addEventListener("wheel",e=>{e.wheelDelta>0||e.detail<0?t.curScroll=Math.abs(t.curScroll)>0?t.curScroll+50:0:t.curScroll=Math.abs(t.curScroll)<(t.songList.length-8)/2*100?t.curScroll-50:t.curScroll})},methods:{...Object(a["d"])({setPlayStatus:"SET_PLAYSTATUS",setPlayList:"SET_PLAYLIST",setPlayListTips:"setPlayListTips",setPlayIndex:"SET_PLAYINDEX"}),currentSong(t){window.console.log("[信息]全局设置当前播放歌曲",t,this.curSongInfo),this.curSongInfo&&t.id===this.curSongInfo.id?this.setPlayStatus(!this.isPlayed):(this.selectPlay({list:[t]}),this.isShowTips&&(this.setPlayListTips({flag:!0,txt:"已开始播放"}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.setPlayListTips({flag:!1,txt:"已开始播放"})},2e3)))},indexMethod(t){return this.isScroll?t+1:(this.currentPage-1)*this.pageSize+t+1+this.offset},currentChange(t){this.currentPage=t},addSongList(t){this.addList({list:[t]}),this.isShowTips&&(this.setPlayListTips({flag:!0,txt:"已添加到播放列表"}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.setPlayListTips({flag:!1,txt:"已添加到播放列表"})},2e3))},delList(t){this.playList.splice(t,1),this.setPlayList(this.playList)},async likeSong(t){const{data:e}=await this.$http.likeSong({id:t.id,like:!t.like});if(200!==e.code)return this.$msg.error("数据请求失败");this.$msg.success("收藏成功")},tips(t,e){"A"!==t.target.nodeName&&e.license&&this.$msg.error("由于版权保护，您所在的地区暂时无法使用。")},closeAddListPop(){this.$refs.popAddList.forEach(t=>{t.doClose()})},scrollCurSong(t){const e=this;if(e.isScroll){const i=e.songList.findIndex(e=>e.id===t.id);i>7&&i<e.songList.length-8?e.curScroll=50*-(i-4):i>=e.songList.length-8&&e.songList.length-8>0?e.curScroll=50*-(e.songList.length-8):e.curScroll=0}},downloadSong(t){const e=n["Loading"].service({fullscreen:!0,text:"正在下载中..."});let i=null;if(t.url.startsWith("/"))return i=this.$http.getMusic(t)+this.$http.getToken(),window.console.log("[信息]下载音乐",t.name,t.id,t,i),void this.$http.download(i,{name:t.name+".mp3"}).then(()=>{this.$nextTick(()=>{e.close()})}).catch(()=>{this.$nextTick(()=>{e.close()})});this.$http.songUrl({id:t.id}).then(s=>{if(window.console.log("[信息]下载音乐",t.name,t.id,t,s),200===s.status&&200===s.data.code&&s.data.data&&s.data.data.length>0){const o=s.data.data[0];i=o.url,i=(i.length>4&&i.substr(0,4),o.url),this.$http.download(i,{name:t.name+".mp3"}).then(()=>{this.$nextTick(()=>{e.close()})}).catch(()=>{this.$nextTick(()=>{e.close()})})}})},...Object(a["b"])(["selectPlay","addList"])},watch:{curSongInfo:{handler(t,e){this.scrollCurSong(t)},deep:!0},songList(){this.currentPage=1}},beforeDestroy(){clearTimeout(this.timer)}},l=r,c=(i("8cba"),i("e607")),d=Object(c["a"])(l,s,o,!1,null,"1466e4dc",null);e["a"]=d.exports},"26cb":function(t,e,i){"use strict";i("ad8f")},"2ec1":function(t,e,i){"use strict";i("7d44")},"34bb":function(t,e){t.exports=require("electron")},"3c5a":function(t,e,i){},4115:function(t,e,i){},"44f8":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{class:["lyrics-main",t.lyricName]},[t.lyricObj.length?e("div",{ref:"lyrics",staticClass:"lyrics",style:t.transform},t._l(t.lyricObj,(function(i,s){return e("p",{key:s,class:[t.isCurLyric(s)]},[t._v(t._s(i.txt))])})),0):e("div",{staticClass:"lyric-empty"},[t.lyric?e("p",[t._v("纯音乐，无歌词")]):e("p",[t._v("歌词加载中......")])])]),"page"===t.local&&t.lyricObj.length>6?e("div",{staticClass:"lyric-more"},[t.isFull?t._e():e("p",[t._v("...")]),e("span",{on:{click:function(e){return e.stopPropagation(),t.fullLyric.apply(null,arguments)}}},[t._v(t._s(this.isFull?"收起":"展开"))])]):t._e()])},o=[],a=(i("a717"),{name:"lyrics",components:{},props:{sId:{type:[Number,String],default:0},currentTime:{type:Number,default:0},local:{type:String,default:""}},data(){return{lyric:null,lyricObj:[],curIndex:0,isFull:!1}},mounted(){this.getLyrics(this.sId)},computed:{lyricName(){return["page"===this.local?"page-lyrics":"",this.isFull?"fullLyrics":""]},isCurLyric(){return t=>t!==this.curIndex||this.local?"":"active"},transform(){return this.curIndex>6?`transform: translateY(-${30*(this.curIndex-6)}px)`:"transform: translateY(0)"}},methods:{async getLyrics(t){const{data:e}=await this.$http.lyrics({id:t});if(200!==e.code)return this.$msg.error("数据请求失败");this.formartLyric(e.lrc)},formartLyric(t){const e=/^\[(\d{2}):(\d{2}.\d{2,})\]\s*(.+)$/;if(!t)return void(this.lyric=!0);const i=t.lyric.split("\n");this.lyric=t.lyric,i.forEach(t=>{const i=e.exec(t);i&&this.lyricObj.push({t:60*i[1]*1+1*i[2],txt:i[3]})}),this.lyricObj.sort((t,e)=>t.t-e.t)},findCurIndex(t){for(let e=0;e<this.lyricObj.length;e++)if(t<=this.lyricObj[e].t)return e;return this.lyricObj.length},fullLyric(){this.isFull=!this.isFull}},watch:{sId(t,e){this.lyric=null,this.lyricObj=[],this.curIndex=0,this.getLyrics(t)},currentTime(t,e){this.lyricObj.length&&(this.curIndex=this.findCurIndex(t)-1)}}}),n=a,r=(i("a911"),i("e607")),l=Object(r["a"])(n,s,o,!1,null,"52340a13",null);e["a"]=l.exports},4544:function(t,e,i){"use strict";i("81d3")},"4c43":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var s={};i.r(s),i.d(s,"env",(function(){return Se})),i.d(s,"reLoadInstance",(function(){return Le})),i.d(s,"rootUrl",(function(){return fe})),i.d(s,"download",(function(){return ke})),i.d(s,"setRootUrl",(function(){return ye})),i.d(s,"getToken",(function(){return be})),i.d(s,"getVercode",(function(){return vt})),i.d(s,"common",(function(){return we})),i.d(s,"getBanner",(function(){return dt})),i.d(s,"search",(function(){return ut})),i.d(s,"serachHot",(function(){return pt})),i.d(s,"serachHotDetail",(function(){return mt})),i.d(s,"serachSuggest",(function(){return gt})),i.d(s,"serachMatch",(function(){return ft})),i.d(s,"cloudsearch",(function(){return ht})),i.d(s,"login",(function(){return yt})),i.d(s,"logout",(function(){return bt})),i.d(s,"getUserInfo",(function(){return wt})),i.d(s,"checkSong",(function(){return St})),i.d(s,"hotList",(function(){return kt})),i.d(s,"playList",(function(){return Lt})),i.d(s,"catlist",(function(){return It})),i.d(s,"playlistdetail",(function(){return xt})),i.d(s,"playlistSCollect",(function(){return Tt})),i.d(s,"playlistRelated",(function(){return Pt})),i.d(s,"playlistComment",(function(){return Mt})),i.d(s,"subPlayList",(function(){return Ot})),i.d(s,"playlistUser",(function(){return Dt})),i.d(s,"addPlayList",(function(){return At})),i.d(s,"songDetail",(function(){return jt})),i.d(s,"songUrl",(function(){return Ut})),i.d(s,"likeSong",(function(){return Nt})),i.d(s,"lyrics",(function(){return Vt})),i.d(s,"simiSong",(function(){return Ft})),i.d(s,"commentSong",(function(){return Et})),i.d(s,"comment",(function(){return Rt})),i.d(s,"commentLike",(function(){return Ht})),i.d(s,"album",(function(){return qt})),i.d(s,"albumSub",(function(){return zt})),i.d(s,"albumDynamic",(function(){return Bt})),i.d(s,"albumComment",(function(){return Yt})),i.d(s,"artistDesc",(function(){return Jt})),i.d(s,"artists",(function(){return Wt})),i.d(s,"artistSub",(function(){return Xt})),i.d(s,"artistAlbum",(function(){return Gt})),i.d(s,"artistMv",(function(){return Kt})),i.d(s,"artistList",(function(){return Qt})),i.d(s,"mv",(function(){return te})),i.d(s,"mvDetail",(function(){return ee})),i.d(s,"mvUrl",(function(){return ie})),i.d(s,"commentMv",(function(){return se})),i.d(s,"simiMv",(function(){return oe})),i.d(s,"personalized",(function(){return _t})),i.d(s,"highquality",(function(){return Ct})),i.d(s,"highqualitytag",(function(){return $t})),i.d(s,"videoUrl",(function(){return le})),i.d(s,"videoDetail",(function(){return ce})),i.d(s,"simiVideo",(function(){return de})),i.d(s,"commentVideo",(function(){return ue})),i.d(s,"hotTopic",(function(){return he})),i.d(s,"topAlbum",(function(){return pe})),i.d(s,"toplist",(function(){return ae})),i.d(s,"topListDetail",(function(){return ne})),i.d(s,"listDetail",(function(){return re})),i.d(s,"getNewMv",(function(){return ge})),i.d(s,"topArtists",(function(){return me})),i.d(s,"subArtist",(function(){return Zt})),i.d(s,"getMusic",(function(){return ve}));var o=i("1f37"),a=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"container",attrs:{id:"app"}},[e("el-header",{attrs:{height:"80px"}},[e("my-header")],1),e("el-main",[e("div",{staticClass:"layout",style:t.mainStyle},[e("router-view")],1),e("my-footer"),e("el-backtop",{attrs:{target:".el-main",bottom:t.backBottom}},[e("img",{attrs:{src:i("a330"),alt:""}})])],1),t.loginDialogVisible?e("Login"):t._e(),e("play-bar",{directives:[{name:"show",rawName:"v-show",value:t.isShowPlayBar,expression:"isShowPlayBar"}]})],1)},n=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[t.topBar?e("div",{staticClass:"top-bar"},[e("div",{staticClass:"button-container"},[e("div",{staticClass:"button btn-blue",on:{click:t.goBack}},[e("i",{staticClass:"fa fa-arrow-left"})]),e("div",{staticClass:"button btn-blue",on:{click:t.goBefore}},[e("i",{staticClass:"fa fa-arrow-right"})])]),e("div",{staticClass:"button-container",staticStyle:{"-webkit-app-region":"drag",width:"100%",height:"30px",display:"flex"}},[t._v(" linux音乐中心 ")]),e("div",{staticClass:"button-container",staticStyle:{"margin-right":"4px"}},[e("div",{staticClass:"button btn-blue",on:{click:t.minimize}},[e("i",{staticClass:"fa fa-minus"})]),e("div",{staticClass:"button btn-blue",on:{click:t.maximize}},[e("i",{class:t.maximized?"fa fa-compress":"fa fa-expand"})]),e("div",{staticClass:"button close",on:{click:t.close}},[e("i",{staticClass:"fa fa-times"})])])]):t._e(),e("div",{staticClass:"w1200"},[e("el-row",{staticClass:"wrapper"},[e("el-col",{attrs:{span:4}},[e("router-link",{staticClass:"logo",attrs:{to:"/"}},[e("img",{attrs:{height:"100px",src:i("b640"),alt:""}})])],1),e("el-col",{attrs:{span:12}},[e("ul",{staticClass:"nav"},t._l(t.menuList,(function(i){return e("li",{key:i.path,class:[0===t.menuActive.indexOf(i.path)?"is-active":""],on:{click:function(e){return t.selectMenu(i.path)}}},[e("span",[t._v(t._s(i.name))])])})),0)]),e("el-col",{attrs:{span:6}},[e("span",{staticClass:"search"},[e("el-popover",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],ref:"popover",attrs:{width:"200",placement:"bottom-end",trigger:"manual"},model:{value:t.isShowSearch,callback:function(e){t.isShowSearch=e},expression:"isShowSearch"}},[e("el-input",{staticClass:"keyVal",attrs:{slot:"reference",placeholder:"请输入歌名、歌词、歌手或专辑",clearable:""},on:{focus:t.handleFocus,input:t.handleInput},slot:"reference",model:{value:t.keyVal,callback:function(e){t.keyVal=e},expression:"keyVal"}}),[t.keyVal?e("div",{staticClass:"search-key-list"},t._l(t.suggestInfo.order,(function(i,s){return e("div",{key:s,staticClass:"search-item"},[e("h6",[t._v(t._s(t.listType[i]))]),e("div",{staticClass:"item-main"},t._l(t.suggestInfo[i],(function(s,o){return e("div",{key:o,staticClass:"list",on:{click:function(e){return t.jumpPage(s,i)}}},[t._v(" "+t._s(s.name)+" "),"songs"===i?[t._v(" -"),t._l(s.artists,(function(i,s){return e("span",{key:s},[t._v(t._s(i.name+(0!==s?" / ":"")))])}))]:"albums"===i?[t._v(" -"),e("span",[t._v(t._s(s.artist.name))])]:t._e()],2)})),0)])})),0):e("div",{staticClass:"hot-search"},[e("h5",[t._v("热门搜索")]),e("div",{staticClass:"hot-search-list"},t._l(t.serachHot,(function(i,s){return e("div",{key:s,staticClass:"hot-item",on:{click:function(e){return t.jumpSearch(i)}}},[e("span",{class:[s<3?"top-"+s:""]},[t._v(t._s(s+1+"."))]),t._v(" "+t._s(i.first)+" ")])})),0)])]],2),e("i",{staticClass:"iconfont icon-search",attrs:{slot:"suffix"},on:{click:t.search},slot:"suffix"})],1)]),e("el-col",{class:t.isLogin?"user-avatar":"login",attrs:{span:2}},[t.isLogin?e("div",{staticClass:"logined"},[e("el-dropdown",{attrs:{placement:"bottom"},on:{command:t.userMenuHandler}},[e("el-image",{staticClass:"avatar",attrs:{src:"../../assets/logo.jpg"}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"user"}},[e("router-link",{attrs:{to:{name:"user"}}},[e("i",{staticClass:"iconfont icon-home"}),t._v("我的主页")])],1),"web"===this.$http.env()?e("el-dropdown-item",{attrs:{command:"toTable"}},[e("i",{staticClass:"iconfont icon-home"}),t._v("我的后台")]):t._e(),"web"===this.$http.env()?e("el-dropdown-item",{attrs:{command:"apiDoc"}},[e("i",{staticClass:"iconfont icon-home"}),t._v("api文档")]):t._e(),t.isAdmin?e("el-dropdown-item",{attrs:{command:"scanMusic"}},[e("i",{staticClass:"iconfont icon-home"}),t._v("扫描本地音乐")]):t._e(),t._e(),t.isAdmin?e("el-dropdown-item",{attrs:{command:"register"}},[e("i",{staticClass:"iconfont icon-grade"}),t._v("注册")]):t._e(),e("el-dropdown-item",{attrs:{command:"set"}},[e("i",{staticClass:"iconfont icon-set"}),t._v("设置")]),e("el-dropdown-item",{attrs:{command:"quit"}},[e("i",{staticClass:"iconfont icon-quit"}),t._v("退出")])],1)],1)],1):e("span",{staticClass:"login-btn",on:{click:t.loginDialog}},[t._v("登录")])])],1)],1)])},l=[],c=(i("a717"),i("7736")),d=(i("508f"),i("34bb")),u={name:"myHeader",components:{},data(){return{curIndex:"0",keyVal:"",logined:!0,topBar:!1,profile:{},serachHot:[],suggestInfo:{},isAdmin:!1,listType:{songs:"单曲",artists:"歌手",albums:"专辑",playlists:"歌单"},menuList:[{name:"首页",path:"/index"},{name:"排行榜",path:"/rank"},{name:"歌单",path:"/playlist"},{name:"MV",path:"/mvlist"},{name:"歌手",path:"/artist"},{name:"我的音乐",path:"/my"}],isShowSearch:!1,maximized:!1}},mounted(){this.userInfo&&"1"===this.userInfo.mgrType&&(this.isAdmin=!0),"node"===this.$http.env()&&(this.topBar=!0)},computed:{...Object(c["c"])(["isLogin","userInfo"]),menuActive(){return this.$route.path}},methods:{...Object(c["d"])(["setLogin","setUserInfo","setLoginDialog"]),async getSearchHot(){const{data:t}=await this.$http.serachHot();if(200!==t.code)return this.$msg.error("数据请求失败");this.serachHot=t.result.hots},async getSerachSuggest(){const{data:t}=await this.$http.serachSuggest({keywords:this.keyVal});if(200!==t.code)return this.$msg.error("数据请求失败");this.suggestInfo=t.result},async logout(){this.$msg.success("退出成功"),window.localStorage.removeItem("isLogin"),window.localStorage.removeItem("token"),window.localStorage.removeItem("userInfo"),window.localStorage.removeItem("token"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("LOGIN_RESULT"),this.setLogin(!1),this.setUserInfo(),this.$router.push({path:"/"}),"web"===this.$http.env()&&(window.location.href="/login.html")},loginDialog(){this.setLoginDialog(!0)},userMenuHandler(t){switch(t){case"home":this.$router.push({name:"homePage"});break;case"grade":this.$router.push({name:"grade"});break;case"set":this.$router.push({path:"/setting",name:"setting"});break;case"register":this.$router.push({path:"/register",name:"register"});break;case"quit":this.logout();break;case"toTable":this.toTable();break;case"scanMusic":this.scanMusic();break;case"apiDoc":this.apiDoc();break}},jumpSearch(t){this.isShowSearch=!1,this.keyVal=t.first,t.first!==this.$route.query.key&&this.$router.push({path:"/search",query:{key:t.first}})},jumpPage(t,e){switch(this.keyVal=t.name,e){case"songs":this.$router.push({path:"/song",query:{id:t.id}});break;case"artists":this.$router.push({path:"/singer",query:{id:t.id}});break;case"albums":this.$router.push({path:"/album",query:{id:t.id}});break;case"playlists":this.$router.push({path:"/playlist/detail",query:{id:t.id}});break}this.isShowSearch=!1},showSearch(){this.keyVal?(this.suggestInfo={},this.getSerachSuggest()):(this.serachHot=[],this.getSearchHot())},search(){this.keyVal&&(this.$router.push({path:"/search",query:{key:this.keyVal}}),this.isShowSearch=!1)},handleInput(){this.keyVal?(this.showSearch(),this.isShowSearch=!0):this.isShowSearch=!1},handleFocus(){this.showSearch(),this.isShowSearch=!0},handleClose(){this.isShowSearch=!1},selectMenu(t){this.isLogin||t.indexOf("/my")<0?this.$router.push({path:t}):this.loginDialog()},toTable(){window.console.log("到后台页面",window.location.href),window.location.href="/table.html"},apiDoc(){window.location.href="/doc.html"},scanMusic(){this.$http.common("/api/music/scanDiskMusic").then(t=>{this.$msg.success("扫描请求已发送")})},goBack(){window.history.back()},goBefore(){window.history.go(1)},minimize(){const t=i("34bb").ipcRenderer;t.send("window-min")},maximize(){const t=i("34bb").ipcRenderer;this.maximized?(this.maximized=!1,t.send("orignal-window")):(this.maximized=!0,t.send("show-window"))},close(){window.close(),d["app"].quit()}},watch:{keyVal(t,e){this.keyVal=t},userInfo(t,e){this.userInfo&&"1"===this.userInfo.mgrType&&(this.isAdmin=!0)}}},h=u,p=(i("8ac8"),i("e607")),m=Object(p["a"])(h,r,l,!1,null,"0541661c",null),g=m.exports,f=function(){var t=this;t._self._c;return t._m(0)},y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("div",{staticClass:"w1200"},[e("p",[t._v("www.anlinxi.com")])])])}],v={components:{},data(){return{}},computed:{},methods:{}},b=v,w=(i("9636"),Object(p["a"])(b,f,y,!1,null,"d3b13604",null)),S=w.exports,k=function(){var t=this,e=t._self._c;return t.curSongInfo?e("div",{class:["play-bar",t.lockName],on:{mouseenter:t.enterBar,mouseleave:t.leaveBar}},[e("div",{staticClass:"fold"},[e("div",{staticClass:"fold-btn",on:{click:t.lockBar}},[e("i",{staticClass:"iconfont icon-lock",class:[t.locked?"active":""]})])]),e("progress-line",{staticClass:"audioProgress",attrs:{progressWidth:t.audioProgressWidth},on:{setProgressLine:t.setAudioProgress}}),e("div",{staticClass:"w1200"},[e("audio",{ref:"audio",attrs:{preload:"auto",src:t.curSongInfo.url+t.$http.getToken()},on:{canplay:t.canplaySong,playing:t.playSong,ended:t.endedSong,error:t.errorSong,timeupdate:t.updateSongTime}}),e("el-row",{staticClass:"play-bar-inside"},[e("el-col",{staticClass:"bar-l",attrs:{span:7}},[e("router-link",{attrs:{to:{path:"/song",query:{id:t.curSongInfo.id}}}},[e("el-image",{staticClass:"bar-cover-img",attrs:{src:t.curSongInfo.album.picUrl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"bar-name"},[e("router-link",{staticClass:"song_name",attrs:{to:{path:"/song",query:{id:t.curSongInfo.id}}}},[t._v(t._s(t.curSongInfo.name))]),e("p",t._l(t.curSongInfo.singer,(function(i,s){return e("router-link",{key:i.name,staticClass:"song_author",attrs:{to:{path:"/singer",query:{id:i.id}}}},[t._v(t._s(0!==s?" / "+i.name:i.name))])})),1)],1),e("div",{staticClass:"bar-time"},[e("span",[t._v(t._s(t.$utils.formatSongTime(1e3*t.currentTime)))]),t._v(" / "+t._s(t.curSongInfo.duration)+" ")])],1),e("el-col",{staticClass:"bar-m",attrs:{span:9}},[e("div",{staticClass:"bar-control"},[e("i",{staticClass:"iconfont icon-audio-prev",attrs:{title:"上一首"},on:{click:function(e){return e.stopPropagation(),t.audioHandler("prev")}}}),e("i",{class:["iconfont",t.playIcon],on:{click:function(e){return e.stopPropagation(),t.audioHandler("play")}}}),e("i",{staticClass:"iconfont icon-audio-next",attrs:{title:"下一首"},on:{click:function(e){return e.stopPropagation(),t.audioHandler("next")}}})])]),e("el-col",{staticClass:"bar-r",attrs:{span:8}},[e("div",{staticClass:"bar-oper"},[e("div",{staticClass:"volume-main"},[e("i",{class:["iconfont",t.mutedIcon],attrs:{title:"音量"},on:{click:function(e){return e.stopPropagation(),t.volumeHandler.apply(null,arguments)}}}),e("progress-line",{staticClass:"volumeLine",attrs:{progressWidth:t.volumeProgressWidth},on:{setProgressLine:t.setvolumeProgress}})],1),e("i",{staticClass:"iconfont",class:t.modeIcon.className,attrs:{title:t.modeIcon.title},on:{click:function(e){return e.stopPropagation(),t.changePlayMode.apply(null,arguments)}}}),e("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.popverClose,expression:"popverClose"}],staticClass:"popver"},[e("div",{staticClass:"lyric"},[e("span",{staticClass:"lyric-btn",attrs:{title:"歌词"},on:{click:t.lyricsHandle}},[t._v("词")])]),e("div",{staticClass:"playlist",on:{click:t.playlistHandle}},[e("i",{staticClass:"iconfont icon-playlist",attrs:{title:"播放列表"}}),e("div",{staticClass:"playlist-num"},[t._v(t._s(99>t.playList.length?t.playList.length:"99+"))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.lyricsVisible,expression:"lyricsVisible"}],staticClass:"lyrics-container"},[e("h3",{staticClass:"lyrics-header"},[e("span",[t._v("歌词")]),e("i",{staticClass:"iconfont icon-closed",on:{click:t.lyricsHandle}})]),e("lyrics",{attrs:{sId:t.curSongInfo.id,currentTime:t.currentTime}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.playlistVisible,expression:"playlistVisible"}],staticClass:"playlist-container"},[e("h3",{staticClass:"playlist-header"},[e("span",[t._v("播放列表"),e("em",[t._v("(共"+t._s(t.playList.length)+"首)")])]),e("div",{staticClass:"delSonglist",on:{click:t.clearSonglist}},[e("i",{staticClass:"iconfont icon-del",attrs:{title:"清空列表"}}),t._v("清空列表")])]),e("song-list",{attrs:{songList:t.playList,isScroll:!0,height:400,typeSize:"mini",isShowTips:!1}})],1)])])])],1)],1)],1):t._e()},L=[],_=function(){var t=this,e=t._self._c;return e("div",{ref:"progress",staticClass:"progress",on:{click:function(e){return e.stopPropagation(),t.point.apply(null,arguments)}}},[e("div",{staticClass:"progress-line"}),e("div",{staticClass:"progress-bg",style:{width:t.progressWidth}},[e("div",{staticClass:"progress-btn",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.move())}}})])])},C=[],$={components:{},props:["progressWidth"],data(){return{}},computed:{},methods:{move(){const t=this;return document.onmousemove=e=>{t.setProgressLine(e,!1)},document.body.onselectstart=function(){return!1},document.onmouseup=function(e){t.setProgressLine(e),document.onmousemove=document.onmouseup=document.body.onselectstart=null},!1},point(t){this.setProgressLine(t)},setProgressLine(t,e=!0){const i=this,s=i.$refs.progress,o=t.clientX-this.getOffsetLeft(s)>=s.offsetWidth?s.offsetWidth:t.clientX-this.getOffsetLeft(s)<=0?0:t.clientX-this.getOffsetLeft(s);i.$emit("setProgressLine",{val:o/s.offsetWidth,flag:e})},getOffsetLeft(t){let e=t.offsetLeft,i=t.offsetParent;while(null!==i)e+=i.offsetLeft,i=i.offsetParent;return e}}},I=$,x=(i("4544"),Object(p["a"])(I,_,C,!1,null,"b76b1d98",null)),T=x.exports,P=i("18fd"),M=i("44f8"),O={components:{ProgressLine:T,songList:P["a"],Lyrics:M["a"]},data(){return{initAudioReady:!1,isMuted:!1,currentTime:0,totalTime:0,volumeNum:.5,oldVolume:0,playMode:0,timer:null,lyricsVisible:!1,playlistVisible:!1,isLock:!1,locked:!1,lockName:"active"}},created(){this.setPlayList(this.playList)},mounted(){if(this.leaveBar(this),"node"===this.$http.env()){const t=i("34bb").ipcRenderer;t.on("audioHandler",(t,e)=>{console.log("[信息]监听到主流程的消息",e),this.audioHandler(e)})}},computed:{...Object(c["c"])(["playIndex","playList","isPlayed","playListTips"]),playIcon(){return this.isPlayed?"icon-audio-pause":"icon-audio-play"},mutedIcon(){return this.isMuted?"icon-volume-active":"icon-volume"},modeIcon(){const t=[{className:"icon-loop",title:"循环模式"},{className:"icon-single-cycle",title:"单曲循环"},{className:"icon-shuffle",title:"随机播放"}];return t[this.playMode]},audioProgressWidth(){return this.currentTime/this.totalTime*100+"%"},volumeProgressWidth(){return this.volumeNum/1*100+"%"},curSongInfo(){return this.playList[this.playIndex]}},methods:{...Object(c["d"])({setPlayStatus:"SET_PLAYSTATUS",setPlayIndex:"SET_PLAYINDEX",setPlayList:"SET_PLAYLIST"}),audioHandler(t){"play"===t?(this.setPlayStatus(!this.isPlayed),this.setPlayIndex(this.playIndex)):this.changeSong(t)},updateSongTime(t){this.initAudioReady&&(this.currentTime=t.target.currentTime)},canplaySong(t){this.initAudioReady=!0},playSong(t){this.initAudioReady=!0,this.setPlayStatus(!0),this.totalTime=t.target.duration},endedSong(t){1===this.playMode?this.loopSong():this.changeSong("next")},errorSong(t){window.console.error("[错误]音频加载失败",this.playList[this.playIndex],t),this.initAudioReady=!1,this.setPlayStatus(!1),setTimeout(()=>this.endedSong(),6e3)},volumeHandler(){this.isMuted=this.$refs.audio.muted=this.isMuted?0:1,this.isMuted&&(this.oldVolume=this.volumeNum),this.volumeNum=this.isMuted?0:this.oldVolume},setAudioProgress(t){this.initAudioReady=!1,this.currentTime=t.val*this.totalTime,t.flag&&(this.$refs.audio.currentTime=t.val*this.totalTime)},setvolumeProgress(t){this.volumeNum=t.val,this.oldVolume=t.val,this.$refs.audio.volume=t.val,this.isMuted=this.$refs.audio.muted=t.val?0:1},changePlayMode(){this.playMode=this.playMode>=2?0:this.playMode+1},clearSonglist(){window.localStorage.removeItem("playList"),this.setPlayList([]),this.setPlayStatus(!1),this.setPlayIndex(0)},changeSong(t){if(1!==this.playList.length){let e=this.playIndex;2===this.playMode?e=Math.floor(Math.random()*this.playList.length-1)+1:"prev"===t?e=0===e?this.playList.length-1:--e:(e=e>=this.playList.length-1?0:++e,this.loadNextMusic()),this.initAudioReady=!1,this.setPlayStatus(!1),this.setPlayIndex(e),this.sendToolTip()}else this.loopSong(),this.sendToolTip()},sendToolTip(){if("node"===this.$http.env()){const t=i("34bb").ipcRenderer,e=this.playList[this.playIndex];let s=e.name;e.singer&&e.singer.length>0&&e.singer[0].name&&(s=e.singer[0].name+"-"+s),t.send("tray-setToolTip",s)}},loopSong(){this.$refs.audio.currentTime=0,this.$refs.audio.play(),this.setPlayStatus(!0)},enterBar(){clearTimeout(this.timer),this.lockName="active"},leaveBar(t){const e=this;e.isLock||e.locked||(clearTimeout(e.timer),e.timer=setTimeout(()=>{e.lockName=e.isLock?"active":""},3e3))},lockBar(){this.locked=!this.locked,this.isLock=this.locked,this.leaveBar()},lyricsHandle(){this.lyricsVisible=!this.lyricsVisible,this.playlistVisible=!1,this.isLock=this.lyricsVisible},playlistHandle(){this.playlistVisible=!this.playlistVisible,this.lyricsVisible=!1,this.isLock=this.playlistVisible},popverClose(){this.lyricsVisible=this.playlistVisible=this.isLock=!1,this.leaveBar()},loadNextMusic(){let t=this.playIndex+1;t=t>=this.playList.length-1?0:++t;const e=this.playList[t];this.$http.songUrl({id:e.id}).then(t=>{window.console.log("[信息]触发加载下一首歌",e.name,e.id,e,t)})}},watch:{curSongInfo(t,e){!t||e&&t.id===e.id||(this.initAudioReady=!1,this.currentTime=0,this.$nextTick(()=>{const t=this.$refs.audio;t&&t.play()}))},isPlayed(t){this.initAudioReady&&this.$nextTick(()=>{const e=this.$refs.audio;e&&(t?e.play():e.pause())})}},destroyed(){clearTimeout(this.timer)}},D=O,A=(i("2ec1"),Object(p["a"])(D,k,L,!1,null,"1720729a",null)),j=A.exports,U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("el-dialog",{staticClass:"login-dialog",attrs:{visible:t.loginDialogVisible,"min-width":"20%",width:"35%","before-close":t.handleClose},on:{"update:visible":function(e){t.loginDialogVisible=e}}},[e("div",{staticClass:"login-wrapper"},[e("div",{staticStyle:{"text-align":"center",width:"100%"}},[e("img",{staticClass:"login-logo",attrs:{height:"180px",src:i("b640"),alt:""}})]),e("el-form",{ref:"loginFormRef",attrs:{model:t.loginForm,rules:t.loginFormRules}},[t.urlMod?e("el-form-item",{attrs:{prop:"url"}},[e("el-input",{attrs:{placeholder:"http://www.xxx.xxx:9306"},on:{blur:t.refreshRootUrl,change:t.refreshRootUrl},model:{value:t.loginForm.url,callback:function(e){t.$set(t.loginForm,"url",e)},expression:"loginForm.url"}},[e("i",{staticClass:"iconfont icon-home",attrs:{slot:"prefix"},slot:"prefix"})])],1):t._e(),e("el-form-item",{attrs:{prop:"phone"}},[e("el-input",{attrs:{placeholder:"请输入帐号登录"},on:{change:t.refreshVerificationCode},model:{value:t.loginForm.phone,callback:function(e){t.$set(t.loginForm,"phone",e)},expression:"loginForm.phone"}},[e("i",{staticClass:"iconfont icon-phone",attrs:{slot:"prefix"},slot:"prefix"})])],1),e("el-form-item",{attrs:{prop:"pwd"}},[e("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.loginForm.pwd,callback:function(e){t.$set(t.loginForm,"pwd",e)},expression:"loginForm.pwd"}},[e("i",{staticClass:"iconfont icon-pwd",attrs:{slot:"prefix"},slot:"prefix"})])],1),e("el-form-item",{staticStyle:{display:"flex"},attrs:{prop:"pwd"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入验证码","show-password":""},model:{value:t.loginForm.vercode,callback:function(e){t.$set(t.loginForm,"vercode",e)},expression:"loginForm.vercode"}},[e("i",{staticClass:"iconfont icon-pwd",attrs:{slot:"prefix"},slot:"prefix"})]),e("div",{staticStyle:{display:"inline-block",width:"20%"}},[t.vercode?e("el-image",{staticStyle:{width:"100px",height:"30px",top:"8px"},attrs:{src:t.vercode,title:"点击更换验证码"},on:{click:t.refreshVerificationCode}}):t._e()],1)],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("登录")])],1)])],1)},N=[],V={components:{},data(){return{urlMod:!0,loginForm:{url:window.localStorage.rootUrl,phone:"",pwd:"",vercode:""},loginFormRules:{phone:[{required:!0,message:"请输入帐号",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},vercode:null}},computed:{...Object(c["c"])(["loginDialogVisible"])},mounted(){"web"===this.$http.env()&&(this.urlMod=!1)},methods:{...Object(c["d"])(["setLogin","setUserInfo","setLoginDialog"]),handleClose(){this.setLoginDialog(!1)},submitForm(){this.$refs.loginFormRef.validate(async t=>{if(t){const{data:t}=await this.$http.login({username:this.loginForm.phone,password:this.loginForm.pwd,vercode:this.loginForm.vercode});window.console.log("[信息]登录返回信息",t),200!==t.code?this.$msg.error(t.message):(window.localStorage.setItem("LOGIN_RESULT",JSON.stringify(t.result)),window.localStorage.setItem("token",t.result.token),window.sessionStorage.setItem("cookie",t.result.cookie),window.localStorage.setItem("userId",t.result.loginCode),this.getUserInfo(t.result),this.setLoginDialog(!1),window.localStorage.setItem("isLogin",!0),this.$http.reLoadInstance(),window.console.log("[信息]登录保存信息",window.localStorage.userId,window.localStorage.token),window.location.reload())}})},async getUserInfo(t){window.localStorage.setItem("userInfo",JSON.stringify(t)),this.setLogin(!0),this.setUserInfo(t)},refreshRootUrl(){this.$http.setRootUrl(this.loginForm.url)},refreshVerificationCode(){this.vercode=this.$http.getVercode(this.loginForm.phone)}}},F=V,E=(i("b3a5"),Object(p["a"])(F,U,N,!1,null,"e45406ee",null)),R=E.exports,H={name:"app",components:{myHeader:g,myFooter:S,Login:R,playBar:j},data(){return{backBottom:80,mainStyle:""}},computed:{...Object(c["c"])(["isLogin","userInfo","loginDialogVisible"]),isShowPlayBar(){return"/mv"!==this.$route.path&&"/video"!==this.$route.path}},mounted(){window.console.log("刷新页面",this);const t={},e=window.location.search.substring(1),i=e.split("&");for(var s=0;s<i.length;s++){var o=i[s].split("=");o.length>=2&&o[0]&&o[1]&&(t[o[0]]=o[1])}if(console.log("[信息]启动参数",t),"node"===this.$http.env()&&(this.mainStyle="top: 30px;"),window.localStorage.token&&(this.$ichat.onMessage=this.onMessage,this.$ichat.link()),window.localStorage.LOGIN_RESULT){const t=JSON.parse(window.localStorage.LOGIN_RESULT);this.setUserInfo(t),this.setLoginDialog(!1),this.setLogin(!0)}"true"===t.guest&&this.$http.login({username:"guest",password:"guest",vercode:"guest"}).then(t=>{const e=t.data;window.console.log("[信息]登录返回信息",e),200!==e.code?this.$msg.error(e.message):(window.localStorage.setItem("LOGIN_RESULT",JSON.stringify(e.result)),window.localStorage.setItem("token",e.result.token),window.sessionStorage.setItem("cookie",e.result.cookie),window.localStorage.setItem("userId",e.result.loginCode),window.localStorage.setItem("userInfo",JSON.stringify(e.result)),this.setLogin(!0),this.setUserInfo(e.result),this.setLoginDialog(!1),window.localStorage.setItem("isLogin",!0),this.$http.reLoadInstance(),window.console.log("[信息]登录保存信息",window.localStorage.userId,window.localStorage.token),window.location.href=window.location.origin+window.location.pathname)})},methods:{...Object(c["d"])(["setLogin","setUserInfo","setLoginDialog"]),onMessage:function(t,e){t.content&&this.$msg.success(t.content)}}},q=H,B=(i("26cb"),Object(p["a"])(q,a,n,!1,null,"0c671199",null)),z=B.exports,Y=i("a18c"),J={isLogin:!1,userInfo:null,loginDialogVisible:!1,isPlayed:!1,playList:[],playIndex:null,playListTips:0};const W="SET_PLAYSTATUS",X="SET_PLAYLIST",G="SET_PLAYINDEX",K={setLogin(t,e=!1){t.isLogin=e},setUserInfo(t,e=null){t.userInfo=e},setLoginDialog(t,e=null){t.loginDialogVisible=e},[W](t,e=!1){t.isPlayed=e},[X](t,e=null){t.playList=e,window.localStorage.setItem("playList",JSON.stringify(e))},[G](t,e=0){t.playIndex=e,window.localStorage.setItem("playIndex",e)},setPlayListTips(t,e=null){t.playListTips=e}};var Q=K,Z={isLogin(t){return t.isLogin||JSON.parse(window.localStorage.getItem("isLogin"))},userInfo(t){return t.userInfo||JSON.parse(window.localStorage.getItem("userInfo"))},loginDialogVisible(t){return t.loginDialogVisible},playList(t){return t.playList.length?t.playList:JSON.parse(window.localStorage.getItem("playList"))||[]},playIndex(t){return t.playIndex||JSON.parse(window.localStorage.getItem("playIndex"))||"0"},curSongInfo(t){return t.playList[t.playIndex]},isPlayed(t){return t.isPlayed},playListTips(t){return t.playListTips}},tt=i("fa7d");const et=(t,e=[])=>tt["a"].concatPlayList(t.filter(t=>!t.license),e),it=(t,e)=>e.findIndex(e=>e.id===t.id);var st={loginSuc(t,e){t.commit("setLoginDialog",e)},playAll({commit:t},{list:e}){t(X,et(e)),t(W,!0),t(G,0)},selectPlay({commit:t,state:e},{list:i}){const s=et(i,e.playList);t(X,s),t(W,!0),t(G,it(i[0],s))},addList({commit:t,state:e},{list:i}){const s=et(i,e.playList);t(X,s)}};o["default"].use(c["a"]);var ot=new c["a"].Store({state:J,mutations:Q,getters:Z,actions:st}),at=i("bac7"),nt=i.n(at),rt=i("ecf2"),lt=i("5976"),ct=i.n(lt);const dt=()=>rt["a"].get("/banner",{}),ut=({keywords:t=""})=>rt["a"].get("/search?keywords="+t,{}),ht=({keywords:t="",limit:e=30,offset:i=0,type:s="1"})=>rt["a"].get(`/cloudsearch?keywords=${t}&limit=${e}&offset=${i}&type=${s}`,{}),pt=()=>rt["a"].get("/search/hot",{}),mt=()=>rt["a"].get("/search/hot/detail",{}),gt=({keywords:t=""})=>rt["a"].get("/search/suggest?keywords="+t,{}),ft=({keywords:t=""})=>rt["a"].get("/search/multimatch?keywords="+t,{}),yt=({username:t="",password:e="",vercode:i=""})=>new Promise((function(s,o){rt["a"].instance.post("/pc/login",{username:t,password:e,vercode:i}).then(t=>{200===t.status&&s(t)}).catch(t=>{o(t)})})),vt=(t="")=>rt["a"].rootUrl+"/pc/getVerify?userId="+t+"&time="+(new Date).getTime(),bt=()=>rt["a"].get("/logout",{}),wt=({uid:t=""})=>rt["a"].get("/user/detail?uid="+t,{}),St=({id:t=""})=>rt["a"].get("/check/music?id="+t,{}),kt=()=>rt["a"].get("/playlist/hot",{}),Lt=({order:t="hot",cat:e="",limit:i=50,offset:s=0})=>rt["a"].get(`/top/playlist?limit=${i}&order=${t}&cat=${e}&offset=${s}`,{}),_t=(t=30)=>rt["a"].get("/personalized?limit="+t,{}),Ct=(t=20,e=0)=>rt["a"].get(`/top/playlist/highquality?limit=${t}&before=${e}`,{}),$t=()=>rt["a"].get("/playlist/highquality/tags",{}),It=()=>rt["a"].get("/playlist/catlist",{}),xt=({id:t="",s:e=8})=>rt["a"].get(`/playlist/detail?id=${t}&s=${e}`,{}),Tt=({id:t="",limit:e=20,offset:i=0})=>rt["a"].get(`/playlist/subscribers?id=${t}&limit=${e}&offset=${i}`,{}),Pt=({id:t=""})=>rt["a"].get("/related/playlist?id="+t,{}),Mt=({id:t="",limit:e=20,offset:i=0,before:s=0})=>rt["a"].get(`/comment/playlist?id=${t}&limit=${e}&offset=${i}&before=${s}`,{}),Ot=({t:t=1,id:e=""})=>rt["a"].get(`/playlist/subscribe?t=${t}&id=${e}`,{}),Dt=({uid:t="",limit:e=30,offset:i=0})=>rt["a"].get(`/user/playlist?uid=${t}&limit=${e}&offset=${i}`,{}),At=({op:t="add",pid:e="",tracks:i=""})=>rt["a"].get(`/playlist/tracks?op=${t}&pid=${e}&tracks=${i}`,{}),jt=({ids:t="",timestamp:e=0})=>new Promise((function(e,i){rt["a"].instance.post("/api/music/songDetail",{id:t}).then(t=>{200===t.status&&e(t)}).catch(t=>{i(t)})})),Ut=({id:t=""})=>new Promise((function(e,i){rt["a"].instance.post("/api/music/getMusicUrl",{id:t}).then(t=>{200===t.status&&e(t)}).catch(t=>{i(t)})})),Nt=({id:t="",like:e=!1})=>rt["a"].get(`/like?id=${t}&like=${e}`,{}),Vt=({id:t=""})=>rt["a"].get("/lyric?id="+t,{}),Ft=({id:t=""})=>rt["a"].get("/simi/song?id="+t,{}),Et=({id:t="",limit:e=20,offset:i=0,before:s=0,timestamp:o=0})=>rt["a"].get(`/comment/music?id=${t}&limit=${e}&offset=${i}&before=${s}&timestamp=${o}`,{}),Rt=({t:t=1,type:e=0,id:i="",content:s="",commentId:o=""})=>rt["a"].get(`/comment?t=${t}&type=${e}&id=${i}&content=${s}&commentId=${o}`,{}),Ht=({id:t="",cid:e="",t:i=1,type:s=0})=>rt["a"].get(`/comment/like?id=${t}&cid=${e}&t=${i}&type=${s}`,{}),qt=({id:t=""})=>rt["a"].get("/album?id="+t,{}),Bt=({id:t=""})=>rt["a"].get("/album/detail/dynamic?id="+t,{}),zt=({id:t="",t:e=1})=>rt["a"].get(`/album/sub?id=${t}&t=${e}`,{}),Yt=({id:t="",limit:e=20,offset:i=0,before:s=0,timestamp:o=0})=>rt["a"].get(`/comment/album?id=${t}&limit=${e}&offset=${i}&before=${s}&timestamp=${o}`,{}),Jt=({id:t=""})=>rt["a"].get("/artist/desc?id="+t,{}),Wt=({id:t=""})=>rt["a"].get("/artists?id="+t,{}),Xt=({id:t="",t:e="1"})=>rt["a"].get(`/artist/sub?id=${t}&t=${e}`,{}),Gt=({id:t="",limit:e=50,offset:i=0})=>rt["a"].get(`/artist/album?id=${t}&limit=${e}&offset=${i}`,{}),Kt=({id:t="",limit:e=50,offset:i=0})=>rt["a"].get(`/artist/mv?id=${t}&limit=${e}&offset=${i}`,{}),Qt=({type:t=-1,area:e=-1,initial:i="",limit:s=50,offset:o=0})=>rt["a"].get(`/artist/list?type=${t}&area=${e}&initial=${i}&limit=${s}&offset=${o}`,{}),Zt=()=>rt["a"].get("/artist/sublist",{}),te=({area:t="",type:e="",order:i="",limit:s=50,offset:o=0})=>rt["a"].get(`/mv/all?area=${t}&type=${e}&order=${i}&limit=${s}&offset=${o}`,{}),ee=({id:t=""})=>rt["a"].get("/mv/detail?mvid="+t,{}),ie=({id:t="",r:e=1080})=>rt["a"].get(`/mv/url?id=${t}&r=${e}`,{}),se=({id:t="",limit:e=20,offset:i=0,before:s=0,timestamp:o=0})=>rt["a"].get(`/comment/mv?id=${t}&limit=${e}&offset=${i}&before=${s}&timestamp=${o}`,{}),oe=({id:t=""})=>rt["a"].get("/simi/mv?mvid="+t,{}),ae=()=>rt["a"].get("/toplist",{}),ne=()=>rt["a"].get("/toplist/detail",{}),re=({id:t="",s:e=8})=>rt["a"].get(`/playlist/detail?id=${t}&s=${e}`,{}),le=({id:t="",r:e=1080})=>rt["a"].get(`/video/url?id=${t}&r=${e}`,{}),ce=({id:t=""})=>rt["a"].get("/video/detail?id="+t,{}),de=({id:t=""})=>rt["a"].get("/related/allvideo?id="+t,{}),ue=({id:t="",limit:e=20,offset:i=0,before:s=0,timestamp:o=0})=>rt["a"].get(`/comment/video?id=${t}&limit=${e}&offset=${i}&before=${s}&timestamp=${o}`,{}),he=(t=20,e=0)=>rt["a"].get(`/hot/topic?limit=${t}&offset=${e}`,{}),pe=({limit:t=20,offset:e=0,area:i="all",type:s="new",year:o="",month:a=""})=>rt["a"].get(`/top/album?limit=${t}&offset=${e}&area=${i}&type=${s}&year=${o}&month=${a}`,{}),me=({limit:t=30,offset:e=0})=>rt["a"].get(`/top/artists?limit=${t}&offset=${e}`,{}),ge=({limit:t=30,area:e=""})=>rt["a"].get(`/mv/first?limit=${t}&area=${e}`,{});let fe=rt["a"].rootUrl;const ye=t=>{window.localStorage.rootUrl=t,fe=t,rt["a"].reLoadInstance()},ve=({id:t=""})=>`${rt["a"].rootUrl}/api/music/getMusic?id=${t}`,be=()=>`&__userId=${window.localStorage.getItem("userId")}&__token=${window.localStorage.getItem("token")}`,we=(t="",e={})=>new Promise((function(i,s){rt["a"].instance.post(t,e).then(t=>{200===t.status&&i(t)}).catch(t=>{s(t)})})),Se=()=>"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process)?(window.console.debug("[信息]当前在electron的nodejs环境下"),"node"):"undefined"!==typeof XMLHttpRequest?(window.console.debug("[信息]当前在web环境下"),"web"):void 0,ke=(t,e={name:"music.mp3"})=>{let i="audio/mpeg-3";return e.type&&(i=e.type),new Promise((function(s,o){ct.a.get(t,{responseType:"arraybuffer",headers:{__userId:window.localStorage.getItem("userId"),__token:window.localStorage.getItem("token")}}).then(t=>{const o=new Blob([t.data],{type:i}),a=URL.createObjectURL(o),n=document.createElement("a");n.href=a,n.download=e.name,window.console.log("[信息]待下载的二进制对象",n),n.click(),window.URL.revokeObjectURL(a),s()}).catch(t=>{o(t)})}))},Le=rt["a"].reLoadInstance,_e={ws:null,linkState:!1,reLinkTime:5e3,link:function(){let t=window.localStorage.rootUrl?window.localStorage.rootUrl:"";t||(t=window.location.host),"https://"===t.substr(0,"https://".length)&&(t=t.substr("https://".length,t.length)),"http://"===t.substr(0,"http://".length)&&(t=t.substr("http://".length,t.length)),_e.ws=new WebSocket("ws://"+t+"/websocket/"+window.localStorage.token),_e.ws.onopen=_e.onopen,_e.ws.onmessage=_e.onmessage,_e.ws.onclose=_e.onclose,_e.ws.onerror=_e.onerror,_e.ws.onopen=_e.onopen},onopen:function(){_e.ws.send(JSON.stringify({msg:"用户"+JSON.parse(localStorage.userInfo).userName+"已登录"})),_e.linkState=!0},onmessage:function(t){if(window.console.debug("[信息]返回sw消息信息",t,t.data),"string"===typeof t.data)try{_e.onMessage(JSON.parse(t.data),t)}catch(i){_e.onMessage(t.data,t)}else if(t.data instanceof ArrayBuffer){var e=t.data;_e.onMessage(e,t)}},onMessage:function(){},onclose:function(){_e.linkState=!1},onerror:function(){setTimeout((function(){_e.link(),_e.reLinkTime=_e.reLinkTime+1e3}),_e.reLinkTime)}};var Ce=_e,$e=i("fa4e"),Ie=i("6d5b"),xe=i("b6e1"),Te=i("ac62"),Pe=i("75ba"),Me=i.n(Pe),Oe=i("d24e"),De=i.n(Oe),Ae=(i("aede"),i("3c5a"),i("9333"),i("55ee"),i("47df")),je=i.n(Ae);o["default"].use(je.a),o["default"].prototype.$msg=je.a.Message,o["default"].prototype.$msgBox=je.a.MessageBox;i("bccf");o["default"].directive("clickoutside",{bind(t,e,i){function s(i){if(t.contains(i.target))return!1;e.expression&&e.value(i)}t.__vueClickOutside__=s,document.addEventListener("click",s)},update(){},unbind(t,e){document.removeEventListener("click",t.__vueClickOutside__),delete t.__vueClickOutside__}}),o["default"].directive("focus",{bind(t,e){console.log("bind")},inserted(t,e){console.log("inserted"),console.log(t),console.log(e),t.focus()},update(){console.log("update")}}),$e["a"].use([Ie["a"],xe["a"],Te["a"]]),o["default"].use(nt.a),o["default"].use(Me.a),o["default"].use(De()($e["a"])),o["default"].config.productionTip=!1,o["default"].prototype.$http=s,o["default"].prototype.$utils=tt["a"],o["default"].prototype.$ichat=Ce,new o["default"]({router:Y["a"],store:ot,render:t=>t(z)}).$mount("#app")},"7d44":function(t,e,i){},"81d3":function(t,e,i){},"8ac8":function(t,e,i){"use strict";i("b810")},"8cba":function(t,e,i){"use strict";i("0a27")},"939a":function(t,e,i){"use strict";i("e3df")},9636:function(t,e,i){"use strict";i("4c43")},a18c:function(t,e,i){"use strict";var s=i("1f37"),o=i("f038"),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"favorite"},[e("div",{staticClass:"favorite-header"},[e("h4",[t._v("歌手列表 "),e("em",[t._v("("+t._s(t.total)+")")])])]),e("div",{staticClass:"list-container"},[t.isLoading?[e("Loading")]:t._l(t.list,(function(i){return e("router-link",{key:i.id,staticClass:"item",attrs:{to:{path:"/singer",query:{id:i.id}}}},[e("div",{staticClass:"faceImg"},[e("el-image",{attrs:{src:i.picUrl+"?param=120y120"}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(i.name))]),e("div",{staticClass:"size"},[e("span",[t._v("专辑: "+t._s(i.albumSize))]),e("span",[t._v("MV: "+t._s(i.mvSize))])])])])}))],2)])},n=[],r=i("bf93"),l={components:{Loading:r["a"]},data(){return{list:[],isLoading:!0,total:0}},computed:{},mounted(){this.getArtist()},methods:{async getArtist(){const{data:t}=await this.$http.subArtist();if(200!==t.code)return this.$msg.error("数据请求失败");this.list=t.data,this.total=this.list.length,this.isLoading=!1}}},c=l,d=(i("939a"),i("e607")),u=Object(d["a"])(c,a,n,!1,null,"f3fb886a",null),h=u.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"playlist"},[e("div",{staticClass:"cover"},[e("div",{staticClass:"cover-img"},[e("el-image",{attrs:{src:t.details.coverImgUrl+t.$http.getToken()}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"cover-info"},[e("div",{staticClass:"cover-title"},[t._v(" "+t._s(t.details.name)+" ")]),t.details.creator?e("div",{staticClass:"cover-author"},[e("el-image",{staticClass:"cover-avatar",attrs:{src:t.details.creator.avatarUrl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])]),e("div",{staticClass:"cover-name"},[t._v(t._s(t.details.creator.nickname))]),e("div",{staticClass:"cover-date"},[t._v(t._s(t.$utils.formartDate(t.details.createTime,"yyyy-MM-dd")))])],1):t._e(),t.details.tags?e("div",{staticClass:"cover-tags"},t._l(t.details.tags,(function(i,s){return e("router-link",{key:s,staticClass:"tag",attrs:{to:{path:"/playlist",query:{cat:i}}}},[t._v("#"+t._s(i))])})),1):t._e(),e("div",{staticClass:"cover-digital"},[e("span",{staticClass:"cover-playCount"},[e("i",{staticClass:"iconfont icon-playnum"}),t._v(" "+t._s(t.$utils.formartNum(t.details.playCount))+"次")]),e("span",{staticClass:"cover-collect"},[e("i",{staticClass:"iconfont icon-collect"}),t._v(" "+t._s(t.$utils.formartNum(t.details.subscribedCount)))]),e("span",{staticClass:"cover-comment"},[e("i",{staticClass:"iconfont icon-comment"}),t._v(" "+t._s(t.$utils.formartNum(t.details.commentCount)))])]),t.details.description?e("div",{staticClass:"cover-desc"},[e("h5",[t._v("歌单简介"),t.isShowDesc?e("em",{staticClass:"desc-close",on:{click:function(e){t.isShowDesc=!1}}},[e("i",{staticClass:"iconfont icon-closed"})]):t._e()]),e("p",{domProps:{innerHTML:t._s(t.details.description)},on:{click:t.showAllDesc}}),t.isShowDesc?e("pre",{staticClass:"cover-desc-all"},[t._v("                    "+t._s(t.details.description)+"\n                ")]):t._e()]):t._e()])]),e("div",{staticClass:"song-header"},[e("h4",[t._v("歌曲列表 "),e("em",[t._v(t._s(t.total+"首歌"))])]),e("span",{staticClass:"play-all",on:{click:t.playAllSongs}},[e("i",{staticClass:"iconfont icon-audio-play"}),t._v(" 播放全部")])]),t.isLoading?[e("Loading")]:[e("song-list",{attrs:{songList:t.songList,stripe:!0}})]],2)},m=[],g=(i("a717"),i("7736")),f=i("eb4d"),y=i("18fd"),v={components:{songList:y["a"],Loading:r["a"]},data(){return{id:"",details:{},songList:[],total:0,isLoading:!0,isShowDesc:!1}},computed:{},mounted(){this.id=this.$route.query.id,this.getDetail({id:this.id,s:""})},methods:{...Object(g["d"])({setPlayStatus:"SET_PLAYSTATUS",setPlayList:"SET_PLAYLIST",setPlayIndex:"SET_PLAYINDEX"}),async getDetail(t){if(this.isLoading=!0,"all"===t.id)return this.getAllSongsV2();const{data:e}=await this.$http.playlistdetail(t);if(200!==e.code)return this.$msg.error("数据请求失败");this.details=e.playlist;const i=e.playlist.trackIds;this.getAllSongs(i)},async getAllSongs(t){const e=[],i=500;let s=[];for(let o=0;o<t.length;o+=i)e.push(t.slice(o,o+i));for(let o=0;o<e.length;o++){const t=[];e[o].map(e=>{t.push(e.id)});const{data:i}=await this.$http.songDetail({ids:t.join(","),timestamp:(new Date).valueOf()+o});s=s.concat(this._formatSongs(i))}this.songList=s,this.total=s.length,this.isLoading=!1},async getAllSongsV2(){const t=1e7,e=[];this.details={id:"all",name:"全部音乐",creator:{nickname:"群星"},description:"收录的全部音乐",playCount:0,subscribedCount:0,commentCount:0,createTime:new Date};const{data:i}=await this.$http.common("/api/music/getMusicPage",{limit:t,page:1});this.details.coverImgUrl=this.$http.rootUrl+"/api/music/getMusicCoverById?id="+i.result.records[0].coverId,this.details.trackCount=i.result.total;for(let s=0;s<i.result.records.length;s++)e.push(Object(f["a"])(i.result.records[s]));this.songList=e,this.total=i.result.total,this.isLoading=!1},playAllSongs(){this.playAll({list:this.songList})},showAllDesc(){this.details.description.length>88&&(this.isShowDesc=!this.isShowDesc)},_formatSongs(t){const e=[];return t.songs.map((i,s)=>{i.id&&(i.license=!t.privileges[s].cp,e.push(Object(f["b"])(i)))}),e},...Object(g["b"])(["playAll"])},watch:{$route(){this.id=this.$route.query.id,this.getDetail({id:this.id,s:""})}}},b=v,w=(i("f568"),Object(d["a"])(b,p,m,!1,null,"1e2c65a9",null)),S=w.exports;s["default"].use(o["a"]);const k=[{path:"/",redirect:"/index"},{path:"/index",name:"index",component:t=>{i.e("chunk-1b176ac4").then(function(){var e=[i("37f9")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/rank",name:"rank",component:t=>{i.e("chunk-436a80bf").then(function(){var e=[i("389a")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/playlist",name:"playlist",component:t=>{i.e("chunk-dda333e6").then(function(){var e=[i("b887")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/playlist/detail",name:"playlistdetail",component:t=>{i.e("chunk-3b69a2f4").then(function(){var e=[i("2425")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/song",name:"songs",component:t=>{i.e("chunk-a5c4b196").then(function(){var e=[i("050a")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/singer",name:"singer",component:t=>{i.e("chunk-343b4524").then(function(){var e=[i("2824")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/album",name:"album",component:t=>{i.e("chunk-1697451e").then(function(){var e=[i("dbea")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/mvlist",name:"mvlist",component:t=>{i.e("chunk-3e919318").then(function(){var e=[i("e4d7")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/mv",name:"mv",component:t=>{Promise.all([i.e("chunk-63f9ef91"),i.e("chunk-ae56bae2")]).then(function(){var e=[i("bab5")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/my",name:"my",children:[{path:"/my/favorite",name:"myFavorite",component:h},{path:"/my/playlist",name:"myPlaylist",component:S}],component:t=>{i.e("chunk-5b477aca").then(function(){var e=[i("9639")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/artist",name:"artist",component:t=>{i.e("chunk-7c5d0f8a").then(function(){var e=[i("04ad")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/search",name:"search",component:t=>{i.e("chunk-17fbb76d").then(function(){var e=[i("efe3")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/video",name:"video",component:t=>{Promise.all([i.e("chunk-63f9ef91"),i.e("chunk-7d764362")]).then(function(){var e=[i("7f63")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/user",name:"user",component:t=>{i.e("chunk-2d2250de").then(function(){var e=[i("e382")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/register",name:"register",component:t=>{i.e("chunk-15eaa1ff").then(function(){var e=[i("d5c2")];t.apply(null,e)}.bind(this)).catch(i.oe)}}],L=new o["a"]({mode:"hash",base:"/web/",scrollBehavior(){return{x:0,y:0}},routes:k});e["a"]=L},a330:function(t,e,i){t.exports=i.p+"img/goTop.f63e0c59.png"},a911:function(t,e,i){"use strict";i("4115")},ad8f:function(t,e,i){},aede:function(t,e,i){},b3a5:function(t,e,i){"use strict";i("da5e")},b640:function(t,e,i){t.exports=i.p+"img/logo.51ec31de.jpg"},b810:function(t,e,i){},bccf:function(t,e,i){},bf93:function(t,e,i){"use strict";var s=function(){var t=this;t._self._c;return t._m(0)},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading"},[e("div",{staticClass:"loader"})])}],a={components:{},data(){return{}},computed:{},methods:{}},n=a,r=(i("eab0"),i("e607")),l=Object(r["a"])(n,s,o,!1,null,"0bb1d930",null);e["a"]=l.exports},cf4a:function(t,e,i){},d4f2:function(t,e,i){},da5e:function(t,e,i){},e3df:function(t,e,i){},eab0:function(t,e,i){"use strict";i("d4f2")},eb4d:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return r}));var s=i("fa7d"),o=i("ecf2");class a{constructor({id:t,name:e,mvId:i,singer:s,album:o,alia:a,duration:n,url:r,vip:l,license:c,publishTime:d}){this.id=t,this.name=e,this.mvId=i,this.singer=s,this.album=o,this.alia=a,this.duration=n,this.url=r,this.vip=l,this.license=c,this.publishTime=d}}function n(t){return new a({id:String(t.id),name:t.name,mvId:t.mv,singer:t.ar,album:t.al,alia:t.alia,vip:1===t.fee,license:t.license&&!1,duration:s["a"].formatSongTime(t.dt),url:`${o["a"].rootUrl}/api/music/getMusic?id=${t.id}`,publishTime:s["a"].formatMsgTime(t.publishTime)})}function r(t){return new a({id:String(t.id),name:t.title,mvId:t.wyyId,singer:[{id:t.artistId,name:t.artist}],album:{id:t.albumId,name:t.album},alia:t.alia,vip:!1,license:!1,duration:t.songLength?s["a"].formatSongTime(1e3*Number(t.songLength)):"",url:`${o["a"].rootUrl}/api/music/getMusic?id=${t.id}`,publishTime:""})}},ecf2:function(t,e,i){"use strict";var s=i("5976"),o=i.n(s),a=i("a18c"),n=i("47df"),r=i("7736");const l=Object(r["d"])(["setLogin","setUserInfo","setLoginDialog"]);let c,d=window.localStorage.rootUrl||"";null!=window.localStorage.rootUrl&&void 0!==window.localStorage.rootUrl&&(d=window.localStorage.rootUrl);const u={rootUrl:d},h=function(){null!=window.localStorage.rootUrl&&void 0!==window.localStorage.rootUrl&&(d=window.localStorage.rootUrl),window.console.log("重新加载实例",d,{__userId:window.localStorage.getItem("userId"),__token:window.localStorage.getItem("token")}),c=o.a.create({time:6e4,withCredentials:!0,baseURL:d,adapter:"",headers:{__userId:window.localStorage.getItem("userId"),__token:window.localStorage.getItem("token")}}),c.defaults.withCredentials=!0,c.defaults.validateStatus=function(){return!0},c.interceptors.request.use((function(t){return t}),(function(t){return n["Message"].error({message:"请求超时!"}),Promise.reject(t)})),c.interceptors.response.use((function(t){const e=t.status;return 200===e?Promise.resolve(t):301===e?(n["Message"].error({message:"请先登录网易云!"}),!1):401===e?(n["Message"].error({message:"请先登录!"}),console.log("[信息]401鉴权错误",e,"production"),window.localStorage.removeItem("isLogin"),window.localStorage.removeItem("token"),window.localStorage.removeItem("userInfo"),window.localStorage.removeItem("token"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("LOGIN_RESULT"),l.setLogin(!1),l.setUserInfo(),"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process)?(this.$msg.success("退出成功"),a["a"].replace({path:"login"})):"undefined"!==typeof XMLHttpRequest&&(window.location.href="/login.html"),!1):Promise.reject(t)}),(function(t){return n["Message"].error({message:"网络错误!"}),Promise.reject(t)}));const t=["get","post"];t.forEach(t=>{u[t]=function(e,i,s){return new Promise((function(o,a){c.post("/api/music/getWyyApi",{url:e,method:t,data:i},s).then(t=>{200===t.status&&o(t)}).catch(t=>{a(t)})}))}}),u.rootUrl=d,u.instance=c};h(),u.reLoadInstance=h,u.instance=c,e["a"]=u},f568:function(t,e,i){"use strict";i("cf4a")},fa7d:function(t,e,i){"use strict";e["a"]={formartNum(t){let e=0;return e=t>9999?Math.round(t/1e4*10)/10+"万":t,e},formartDate(t,e){const i=new Date(Number(t)),s={yyyy:i.getFullYear(),MM:(i.getMonth()+1+"").padStart(2,"0"),dd:(i.getDate()+"").padStart(2,"0"),HH:(i.getHours()+"").padStart(2,"0"),mm:(i.getMinutes()+"").padStart(2,"0"),ss:(i.getSeconds()+"").padStart(2,"0")};for(const o in s){const t=new RegExp("("+o+")").exec(e);t&&(e=e.replace(t[1],s[o]))}return e},formatSongTime(t=0){t/=1e3;const e=(Math.floor(t/60)+"").padStart(2,"0"),i=(Math.floor(t%60)+"").padStart(2,"0");return`${e}:${i}`},formatMsgTime(t){if(!t)return"";let e="";const i=new Date,s=new Date(t);return e=i.toDateString()===s.toDateString()?this.formartDate(t,"HH:mm"):s.getFullYear()===i.getFullYear()?this.formartDate(t,"MM月dd日 HH:mm"):this.formartDate(t,"yyyy年MM月dd日"),e},concatPlayList(t=[],e=[]){const i=[...e,...t],s=new Map;for(const o of i)s.has(o.id)||s.set(o.id,o);return[...s.values()]}}}});
//# sourceMappingURL=app.fe823e33.js.map